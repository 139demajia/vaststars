<html>
    <head>
        <style>
            body {
                font: 100% "阿里巴巴普惠体";
            }
            red-button, green-button {
                width: 14.95vmin;
                height: 14.95vmin;
                font-size: 5vmin;
                align-items: center;
                justify-content: center;
                background-size: 100% 100%;
            }
            red-button {
                background-image: "/pkg/vaststars.resources/ui/textures/bulk-opt/red-button-bg.texture";
            }
            red-button:active {
                background-image: "/pkg/vaststars.resources/ui/textures/bulk-opt/red-button-bg-active.texture";
            }
            green-button {
                background-image: "/pkg/vaststars.resources/ui/textures/bulk-opt/green-button-bg.texture";
            }
            green-button:active {
                background-image: "/pkg/vaststars.resources/ui/textures/bulk-opt/green-button-bg-active.texture";
            }

            @keyframes top-border-move {
                0% {
                    background-position-x: 0vmin;
                }
                100% {
                    background-position-x: 5.16vmin;
                }
            }

            @keyframes bottom-border-move {
                0% {
                    background-position-x: 0vmin;
                }
                100% {
                    background-position-x: -5.16vmin;
                }
            }

            @keyframes left-border-move {
                0% {
                    background-position-y: 0vmin;
                }
                100% {
                    background-position-y: -5.16vmin;
                }
            }

            @keyframes right-border-move {
                0% {
                    background-position-y: 0vmin;
                }
                100% {
                    background-position-y: 5.16vmin;
                }
            }

            top-border, bottom-border, left-border, right-border{
                pointer-events: none;
                background-size: 5.16vmin 5.16vmin;
            }

            top-border, bottom-border {
                background: "/pkg/vaststars.resources/ui/textures/bulk-opt/border-horizontal.texture";
                background-repeat: repeat-x;
            }

            top-border {
                animation: top-border-move 2s infinite linear;
            }

            bottom-border {
                animation: bottom-border-move 2s infinite linear;
            }

            left-border, right-border {
                background: "/pkg/vaststars.resources/ui/textures/bulk-opt/border-vertical.texture";
                background-repeat: repeat-y;
            }

            left-border {
                animation: left-border-move 2s infinite linear;
            }

            right-border {
                animation: right-border-move 2s infinite linear;
            }

            border-corner {
                pointer-events: none;
                width: 6.75vmin;
                height: 6.75vmin;
                background: "/pkg/vaststars.resources/ui/textures/bulk-opt/border-corner.texture";
                background-size: 100% 100%;
            }

            select-bg {
                pointer-events: none;
                width: 100%;
                height: 20.54vmin;
                background: "/pkg/vaststars.resources/ui/textures/bulk-opt/select-bg.texture";
                background-size: 100% 100%;
            }
        </style>
        <script type="text/x-lua" >
            local ui_sys = import_package "vaststars.ui".ui_system
            local start = ui_sys.createDataMode(window, ...)

            local function _send()
                local e = assert(document.getElementsByTagName("select-box")[1])
                ui_sys.pub(window, {"select", e.clientLeft, e.clientTop, e.clientWidth, e.clientHeight})
            end

            function start.clickButton(...)
                ui_sys.pub(window, {...})
            end

            function init()
                _send()

                window.onMessage(window.getName() .. "-message", function(param)
                    _send()
                end)
            end
        </script>
    </head>
    <body style = "pointer-events: none; align-items: center;" onload = "init()">
        <div style = "pointer-events: none; height: 10%;" />
        <select-box style = "pointer-events: none; width: 80%; height: 70%;" >
            <select-bg style = "position: absolute; top: 0; transform: rotate(180deg);" />
            <select-bg style = "position: absolute; bottom: 0;" />
            <top-border style = "width: 100%; height: 5.16vmin; top: -2vmin; position: absolute;" />
            <bottom-border style = "width: 100%; height: 5.16vmin; bottom: -2vmin; position: absolute;" />
            <left-border style = "width: 5.16vmin; height: 100%; left: -2vmin; position: absolute;" />
            <right-border style = "width: 5.16vmin; height: 100%; right: -2vmin; position: absolute;" />
            <border-corner style = "top: -2.5vmin; left: -2.5vmin; position: absolute;" />
            <border-corner style = "top: -2.5vmin; right: -2.5vmin; position: absolute;" />
            <border-corner style = "bottom: -2.5vmin; left: -2.5vmin; position: absolute;" />
            <border-corner style = "bottom: -2.5vmin; right: -2.5vmin; position: absolute;" />
        </select-box>
        <div style = "width: 80%; height: 10%; flex-direction: row; gap: 2vmin; justify-content: flex-end;">
            <red-button data-event-click = "clickButton('teardown')"  style="position:absolute; left:0;"  data-if = "teardown">
                <div style = "width: 8.64vmin; height: 11.76vmin; background-image: '/pkg/vaststars.resources/ui/textures/bulk-opt/teardown.texture'; background-size: 100% 100%;" />
            </red-button>
            <green-button data-event-click = "clickButton('close')">
                <div style = "width: 9.11vmin; height: 9.11vmin; background-image: '/pkg/vaststars.resources/ui/textures/bulk-opt/close.texture'; background-size: 100% 100%;" />
            </green-button>
            <green-button data-event-click = "clickButton('move')" data-if = "move">
                <div style = "width: 12.07vmin; height: 12.15vmin; background-image: '/pkg/vaststars.resources/ui/textures/bulk-opt/move.texture'; background-size: 100% 100%;" />
            </green-button>
            <green-button data-event-click = "clickButton('move_confirm')" data-if = "move_confirm">
                <div style = "width: 10.75vmin; height: 8.57vmin; background-image: '/pkg/vaststars.resources/ui/textures/bulk-opt/move-confirm.texture'; background-size: 100% 100%;" />
            </green-button>
        </div>
    </body>
</html>
